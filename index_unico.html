<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Progresso Antropom√©trico - Msa. Julia Barichello</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .progress-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }
        .metric-card {
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 20px;
            margin-bottom: 20px;
        }
        .chart-container {
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 20px;
            margin-bottom: 20px;
        }
        .goal-progress {
            background: linear-gradient(90deg, #4CAF50 0%, #81C784 100%);
            height: 30px;
            border-radius: 15px;
            position: relative;
            overflow: hidden;
        }
        .goal-indicator {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: #fff;
            color: #4CAF50;
            padding: 5px 10px;
            border-radius: 15px;
            font-weight: bold;
            font-size: 12px;
        }
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
        }
        .navbar {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-dark">
        <div class="container">
            <span class="navbar-brand mb-0 h1">üìä Progresso Antropom√©trico</span>
            <span class="navbar-text">Para Msa. Natalia Medina e Msa. Julia Barichello</span>
        </div>
    </nav>

    <div class="container mt-4">
        <div class="row">
            <div class="col-md-12">
                <div class="progress-card text-center">
                    <h2>üéØ Objetivo: 73kg</h2>
                    <p class="mb-2">Peso Atual: <span id="current-weight">70.0</span> kg</p>
                    <div class="goal-progress">
                        <div class="goal-indicator" style="left: 75%;">3kg para a meta!</div>
                    </div>
                    <p class="mt-2 mb-0">√öltima atualiza√ß√£o: <span id="last-update">Carregando...</span></p>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-4">
                <div class="metric-card text-center">
                    <h5>üí™ IMC Atual</h5>
                    <h3 id="current-imc">Calculando...</h3>
                    <p id="imc-category">Carregando...</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="metric-card text-center">
                    <h5>üìà Progresso Total</h5>
                    <h3 id="total-progress">Calculando...</h3>
                    <p>desde o in√≠cio</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="metric-card text-center">
                    <h5>üìÖ Dias de Progresso</h5>
                    <h3 id="days-progress">Calculando...</h3>
                    <p>dias monitorados</p>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12">
                <div class="chart-container">
                    <h4>üìä Evolu√ß√£o do Peso</h4>
                    <img id="weight-chart" src="charts/weight_evolution.png" alt="Gr√°fico de Evolu√ß√£o do Peso" class="img-fluid">
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6">
                <div class="chart-container">
                    <h4>üìè Medidas Corporais</h4>
                    <img id="measurements-chart" src="charts/body_measurements.png" alt="Gr√°fico de Medidas Corporais" class="img-fluid">
                </div>
            </div>
            <div class="col-md-6">
                <div class="chart-container">
                    <h4>üìä IMC ao Longo do Tempo</h4>
                    <img id="imc-chart" src="charts/imc_evolution.png" alt="Gr√°fico de Evolu√ß√£o do IMC" class="img-fluid">
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12">
                <div class="metric-card">
                    <h5>üìã √öltimas Medi√ß√µes</h5>
                    <div class="table-responsive">
                        <table class="table table-striped" id="recent-measurements">
                            <thead>
                                <tr>
                                    <th>Data</th>
                                    <th>Hor√°rio</th>
                                    <th>Peso (kg)</th>
                                    <th>Bra√ßo (cm)</th>
                                    <th>Cintura (cm)</th>
                                    <th>Quadril (cm)</th>
                                    <th>Panturrilha (cm)</th>
                                    <th>IMC</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td colspan="8" class="text-center">Carregando dados...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer class="text-center mt-5 py-3">
        <p class="text-muted">√öltima atualiza√ß√£o autom√°tica: <span id="auto-update-time">Carregando...</span></p>
        <small class="text-muted">Dados sincronizados automaticamente com Google Sheets</small>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Fun√ß√£o para calcular IMC
        function calculateIMC(weight, height = 1.75) { // Assumindo altura de 1.75m - ajustar conforme necess√°rio
            return (weight / (height * height)).toFixed(1);
        }

        // Fun√ß√£o para categorizar IMC
        function getIMCCategory(imc) {
            if (imc < 18.5) return "Abaixo do peso";
            if (imc < 25) return "Peso normal";
            if (imc < 30) return "Sobrepeso";
            return "Obesidade";
        }

        // Fun√ß√£o para atualizar dados na p√°gina
        function updatePage() {
            // Aqui voc√™ pode adicionar l√≥gica para buscar dados atualizados
            const currentWeight = 70.0; // Este valor ser√° atualizado pelo script R
            const height = 1.75; // Ajustar conforme sua altura real
            
            const imc = calculateIMC(currentWeight, height);
            const imcCategory = getIMCCategory(parseFloat(imc));
            
            document.getElementById('current-weight').textContent = currentWeight.toFixed(1);
            document.getElementById('current-imc').textContent = imc;
            document.getElementById('imc-category').textContent = imcCategory;
            
            // Atualizar timestamp
            document.getElementById('last-update').textContent = new Date().toLocaleString('pt-BR');
            document.getElementById('auto-update-time').textContent = new Date().toLocaleString('pt-BR');
        }

        // Atualizar p√°gina ao carregar
        document.addEventListener('DOMContentLoaded', updatePage);
        
        // Recarregar gr√°ficos a cada 5 minutos para pegar atualiza√ß√µes
        setInterval(function() {
            const timestamp = new Date().getTime();
            document.getElementById('weight-chart').src = `charts/weight_evolution.png?t=${timestamp}`;
            document.getElementById('measurements-chart').src = `charts/body_measurements.png?t=${timestamp}`;
            document.getElementById('imc-chart').src = `charts/imc_evolution.png?t=${timestamp}`;
        }, 300000); // 5 minutos
    </script>
</body>

</html>
